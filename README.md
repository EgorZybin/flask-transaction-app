# Flask Transaction App

## Описание

Это приложение на Flask реализует систему для управления пользователями и транзакциями. Приложение включает следующие функции:

- **Модели**:
  - Пользователь: имеет баланс, ставку комиссии и роль.
  - Транзакция: хранит информацию о сумме, комиссии и статусе транзакции.

- **API**:
  - `/create_transaction`: создает транзакцию с расчетом комиссии.
  - `/cancel_transaction`: отменяет транзакцию.
  - `/check_transaction`: проверяет статус транзакции.

- **Админка**:
  - Дашборд: показывает статистику по пользователям, транзакциям и сумме транзакций за день.
  - Пользователи: создание, редактирование и удаление пользователей.
  - Транзакции: список транзакций с возможностью изменения статуса.

- **Задачи Celery**:
  - Каждую минуту проверяются транзакции со статусом "Ожидание" и если они не были подтверждены в течение 15 минут, их статус меняется на "Истекла".

## Установка

1. Клонируйте репозиторий:
    ```bash
    git clone https://github.com/EgorZybin/flask-transaction-app.git
    cd Flask_app
    ```

2. Создайте и активируйте виртуальное окружение:
    ```bash
    python3 -m venv venv
    source venv/bin/activate  # для Linux/Mac
    venv\Scripts\activate     # для Windows
    ```

3. Установите зависимости:
    ```bash
    pip install -r requirements.txt
    ```

4. Создайте базу данных и примените миграции:
    ```bash
    flask db init
    flask db migrate
    flask db upgrade
    ```

5. Запустите приложение:
    ```bash
    flask run
    ```

6. Запустите Celery:
    ```bash
    celery -A app.tasks.celery worker
    ```

## Запуск тестов

1. Установите `pytest`:
    ```bash
    pip install pytest
    ```

2. Запустите тесты:
    ```bash
    pytest
    ```

## API Документация

API описан с помощью Swagger. Для того чтобы просмотреть документацию, перейдите по URL `/swagger`.

## Дополнительные возможности

- **Автообновление**: Настроено автообновление списков пользователей и транзакций через заданные интервалы времени.
- **Фильтрация транзакций**: Возможность фильтровать транзакции по пользователю и статусу.
- **Роли пользователей**: Администратор может управлять всеми пользователями и транзакциями, обычный пользователь видит только свои транзакции.

## Автор

Автор: [Egor Zybin](https://github.com/EgorZybin) telegram: [@raizzep](https://t.me/raizzep)